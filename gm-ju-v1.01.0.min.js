(function(global){"use strict";var __JU,i,j,gVar,parts,curPart,curObj,_autoPopulateGlobal=true,VERSION='v1.01.0',TYPE='JsUtils';if(global.gettext===undefined){global.gettext=function(s){if(s==undefined){return'';}
return s;};}
function _removeFromVersionQueue(versionString){var index=global.JU._versionQueue.indexOf(versionString);if(index>-1){global.JU._versionQueue.splice(index,1);}}
if(!global.JU&&global.hasOwnProperty('JU_autoPopulateGlobal'))
{_autoPopulateGlobal=!!global['JU_autoPopulateGlobal'];}
global.JU=global.JU||{'_repo':[],'_versionQueue':[],'_autoPopulateGlobal':_autoPopulateGlobal,'_version':VERSION,activate:function(target,versionString)
{var i,gVar,ju=global.JU.get(versionString),property;if(!ju||!target){return false;}
_removeFromVersionQueue(versionString);global.JU._versionQueue.push(ju.version);for(property in ju){if(ju.hasOwnProperty(property)){target[property]=ju[property];}}
return true;},deactivate:function(target,versionString){if(!target){return false;}
var removeAll=false,ju,i,gVar;if(versionString=='*'){removeAll=true;versionString=null;}
ju=global.JU.get(versionString);if(!ju){return false;}
for(i=0;i<ju._globalVars.length;i++){gVar=ju._globalVars[i];if(gVar&&gVar.indexOf('.')==-1&&target.hasOwnProperty(gVar)&&(target[gVar].hasOwnProperty('type')&&target[gVar].type==TYPE)&&(removeAll||target[gVar].version==versionString))
{delete target[gVar];}}
return true;},publish:function(ju,populateGlobals,forcePush){var version=ju.version,_repo=global.JU._repo;if(global.JU.get(version)&&forcePush){global.JU.remove(version);}
if(!global.JU.get(version)){_repo.push(ju);_repo.sort(function(a,b){if(''.localeCompare){return a.toString().localeCompare(b.toString());}
if(a.toString()<b.toString()){return-1;}
if(a.toString()>b.toString()){return 1;}
return 0;});}
if(populateGlobals){global.JU.activate(global,version);}},get:function(versionString)
{var i,_repo=global.JU._repo;if(!_repo){return null;}
if(!versionString){return _repo[_repo.length-1];}
for(i=0;i<_repo.length;i++){if(_repo[i].version==versionString){return _repo[i];}}
return null;},remove:function(versionString){var i,_repo=global.JU._repo,ju;if(!_repo){return null;}
if(!versionString){ju=global.JU.get();if(!ju){return null;}
versionString=ju.version;}
for(i=0;i<_repo.length;i++){if(_repo[i].version==versionString){_removeFromVersionQueue(versionString);global.JU.deactivate(global,versionString);return _repo.splice(i,1);}}
return null;},revert:function(populateGlobals){var _repo=global.JU._repo,queue=global.JU._versionQueue,version,ju;if(_repo.length>0&&queue.length>0){version=queue.pop();while(queue.length){ju=global.JU.get(version);if(!ju){version=queue.pop();continue;}
global.JU.deactivate(global,version);if(populateGlobals&&queue.length){version=queue[queue.length-1];global.JU.activate(global,version);}
return ju;}}
return null;}};__JU={'_globalVars':['Arr','Dt','Fn','Obj','Pref','Slct','Stl','Str','Tmr','Typ','UI','UI.Bs','UI.Patterns','Utl'],'version':VERSION,'type':TYPE};for(i=0;i<__JU._globalVars.length;i++){gVar=__JU._globalVars[i];if(gVar){if(gVar.indexOf('.')==-1){__JU[gVar]={'version':VERSION,'class':gVar,'type':TYPE}}
else{curObj=__JU;parts=gVar.split('.');for(j=0;j<parts.length;j++){curPart=parts[j];if(!curObj.hasOwnProperty(curPart)){curObj[curPart]={'version':VERSION,'class':curPart,'type':TYPE};}
curObj=curObj[curPart];}}}}
global.JU.__JU=__JU;}(typeof window!=='undefined'?window:this));(function(global,Tmr){"use strict";Tmr.run=function(func,delay,thisArg){return setTimeout(function(){func.call(thisArg||this);},delay);};}(typeof window!=='undefined'?window:this,JU.__JU.Tmr));(function(global,$,Dt){"use strict";var _dayShort=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],_dayLong=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'],_dayViet=['Thứ Hai','Thứ Ba','Thứ Tư','Thứ Năm','Thứ Sáu','Thứ Bảy','Chúa Nhật'],_monthShort=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],_monthLong=['January','February','March','April','May','June','July','August','September','October','November','December'];Dt.getDateParts=function(d){var o={},j=d.getDate(),w=d.getDay(),GG=d.getHours(),n=d.getMonth(),Y=d.getFullYear(),g=GG<=12?GG:GG-12,tz=d.getTimezoneOffset()/60,tzSign=tz<0?'-':'+';g=g==0?12:g;tz=Math.abs(tz);o.d=Dt.padZero(j);o.D=_dayShort[w];o.j=j;o.l=_dayLong[w];o.N=_dayViet[w];o.F=_monthLong[n];o.m=Dt.padZero(n+1);o.M=_monthShort[n];o.n=n+1;o.T='Tháng '+(n+1);o.Y=Y;o.y=Y.toString().substring(2);o.a=GG<12?'am':'pm';o.A=GG<12?'AM':'PM';o.g=g;o.G=GG;o.h=Dt.padZero(g);o.H=Dt.padZero(GG);o.i=Dt.padZero(d.getMinutes());o.s=Dt.padZero(d.getSeconds());o.O=tzSign+Dt.padZero(tz)+'00';o.P=tzSign+Dt.padZero(tz)+':00';o.c=o.Y+'-'+o.m+'-'+o.d+' '+o.H+':'+o.i+':'+o.s+o.P;o.r=o.D+', '+o.j+' '+o.M+' '+o.Y+' '+o.H+':'+o.i+':'+o.s+' '+o.O;o.q=o.Y+'-'+o.m+'-'+o.d+' '+o.H+':'+o.i+':'+o.s;o.o=o.Y+'-'+o.m+'-'+o.d;o.t=o.g+':'+o.i+o.a;return o;};Dt.getUtcParts=function(d){var utc=Dt.toUtc(d),o=Dt.getDateParts(utc);o.O='+0000';o.P='+00:00';o.c=o.c.substring(0,19)+o.O;o.r=o.r.substring(0,26)+o.P;return o;};Dt.toUtc=function(d)
{var offset=d.getTimezoneOffset()*60000;return new Date(d.getTime()+offset);};Dt.isSameDate=function(d1,d2)
{return d1.getFullYear()==d2.getFullYear()&&d1.getMonth()==d2.getMonth()&&d1.getDate()==d2.getDate();};Dt.epochSameDate=function(e1,e2){var d1=new Date(e1),d2=new Date(e2);return Dt.isSameDate(d1,d2);};Dt.padZero=function(s){s=s.toString();return s.length==2?s:'0'+s;};Dt.isDate=function(o){return Object.prototype.toString.call(o)==="[object Date]";};Dt.isValid=function(d){if(Dt.isDate(d)){return!isNaN(d.getTime());}
return false;};Dt.format=function(d,format){if(!Dt.isValid(d)){return format;}
var p=Dt.getDateParts(d),result=format.replace(/(\\?)([dDjlNFmMnTYyaAgGhHisOPcrqot])/g,function(whole,slash,key){if(!slash){return p[key];}
return key;});result=result.replace(/\\([a-z])/gi,'$1');return result;};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Dt));(function(global,$,Obj){"use strict";Obj.pop=function(obj,prop,defaultValue){if(!obj.hasOwnProperty(prop)){return defaultValue}
var result=obj[prop];delete obj[prop];return result;};Obj.hasProp=function(obj,prop){return obj.hasOwnProperty(prop);}}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Obj));(function(global,$,Typ){"use strict";Typ.isJquery=function(o){return o instanceof jQuery;};Typ.isObj=function(o){return $.type(o)==='object';};Typ.isStr=function(o){return $.type(o)==='string';};Typ.isFunc=function(o){return $.type(o)==='function';};Typ.isRegex=function(o){return $.type(o)==='regexp';};Typ.isNumber=function(o){return $.type(o)==='number';};Typ.isInt=function(o){return Typ.isNumber(o)&&o%1===0;};Typ.isFloat=function(o){return Typ.isNumber(o)&&!Typ.isInt(o);};Typ.isDate=function(o){return $.type(o)==='date';};Typ.isBool=function(o){return $.type(o)==='boolean';};Typ.isArray=function(o){return $.type(o)=='array';};Typ.isNode=function(o){return typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string";};Typ.isElement=function(o){return typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string";};Typ.isAjaxCommand=function(o){return!!(o!=undefined&&o!=false&&!Typ.isStr(o)&&o.isAjaxCommand&&o.options!=undefined&&o.displayMethod!=undefined&&o.command!=undefined);};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Typ));(function(global,$,Arr){"use strict";Arr.isArray=function(o){return $.type(o)=='array';};Arr.isProp=function(arr,prop){return arr.hasOwnProperty(prop);};Arr.each=function(arr,func){var i=0,k,r;for(k in arr){if(arr.hasOwnProperty(k)){r=func.call(arr,arr[k],k,i);if(r===false){break;}
i++;}}};Arr.eachJq=function(jqObj,func){var i,r,len;if(jqObj==undefined||!(jqObj instanceof jQuery)){return null;}
for(i=0,len=jqObj.length;i<len;i++){r=func.call(jqObj,jqObj.eq(i),jqObj.get(i),i);if(r===false){break;}}};Arr.range=function(start,end,step){if(end==undefined){end=start;start=0;}
if(step==undefined){step=1;}
var arr=[],val=start;while(val<end){arr.push(val);val+=step;}
return arr;};Arr.implode=function(arr,glue){glue=glue==undefined?', ':glue;return arr.join(glue);};Arr.chop=function(arr,chunkSize){var result=[],chunk;while(arr.length){chunk=arr.splice(0,chunkSize);result.push(chunk);}
return result;};Arr.chunks=function(arr,chunkSize){var result=[];for(var i=0,len=arr.length;i<len;i+=chunkSize)
result.push(arr.slice(i,i+chunkSize));return result;}}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Arr));(function(global,$,Fn){"use strict";Fn.call=function(func,thisArg,argArray){var args=[].slice.call(arguments).splice(2);return Fn.apply(func,thisArg,args);};Fn.apply=function(func,thisArg,argArray){if(func!=undefined&&$.type(func)==='function'){if(argArray==undefined){argArray=[];}
else if($.type(argArray)!='array'){argArray=[argArray];}
return func.apply(thisArg,argArray);}};Fn.callByName=function(funcName,context,argArray){if(funcName==undefined||!funcName){return;}
context=context||global;var args=[].slice.call(arguments).splice(2),namespaces=funcName.split("."),func=namespaces.pop(),i;for(i=0;i<namespaces.length;i++){context=context[namespaces[i]];if(context==undefined){return;}}
if(context[func]&&$.isFunction(context[func])){return context[func].apply(context,args);}};Fn.applyByName=function(funcName,context,argArray){if(funcName==undefined||!funcName){return;}
context=context||global;var namespaces=funcName.split("."),func=namespaces.pop(),i;for(i=0;i<namespaces.length;i++){context=context[namespaces[i]];if(context==undefined){return;}}
if(context[func]&&$.isFunction(context[func])){return context[func].apply(context,argArray);}};Fn.chain=function(thisArg,arrArray,args){var f;args=Array.prototype.splice.call(arguments,2);for(f in args){if(args.hasOwnProperty(f)){if(f!=undefined&&$.type(f)==='function'){f.apply(thisArg,arrArray);}}}};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Fn));(function(global,$,Stl){"use strict";Stl.add=function(style){if($.isArray(style))
{$.each(style,function(i,elm){$('<link href="">').attr('href',elm).appendTo('head');});}
else if($.type(style)==='string')
{if(style.indexOf('http')==0)
{Stl.add([style]);}
else
{$('<style type="text/css">'+style+'</style>').appendTo('head');}}};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Stl));(function(global,$,Str){"use strict";Str.empty=function(s){return!!(s==undefined||s.length===0||Str.trim(s).length===0||!s);};Str.equals=function(s1,s2,caseSensitive)
{if(s1==undefined||s2==undefined)
{return false;}
if(caseSensitive)
{return s1==s2;}
return s1.toLowerCase()==s2.toLowerCase();};Str.boolVal=function(s){if(Str.empty(s)){return false;}
s=Str.trim(s).toLowerCase();if(s=='0'||s=='0.0'||s=='false'){return false;}
return!!s;};Str.regexEscape=function(s){if(Str.empty(s)){return'';}
if($.type(s)==='string'){return s.replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1");}
else if($.isArray(s)){var result=[];$.each(s,function(i,v){result.push(Str.regexEscape(v));});return result;}
return s;};Str.startsWith=function(s,pattern,caseSensitive){if(caseSensitive){return s.indexOf(pattern)===0;}
return s.toLowerCase().indexOf(pattern.toLowerCase())===0;};Str.endsWith=function(s,pattern,caseSensitive){var d=s.length-pattern.length;if(caseSensitive){return d>=0&&s.lastIndexOf(pattern)===d;}
return d>=0&&s.toLowerCase().lastIndexOf(pattern.toLowerCase())===d;};Str.contains=function(s,needle,caseSensitive){if(Str.empty(s)||Str.empty(needle)){return false;}
if(caseSensitive){return s.indexOf(needle)>-1;}
return s.toLowerCase().indexOf(needle.toLowerCase())>-1;};Str.containsAll=function(s,needles,caseSensitive){var i=0;if($.isArray(needles)){for(i=0;i<needles.length;i++){if(!Str.contains(s,needles[i],caseSensitive)){return false;}}
return true;}
return Str.contains(s,needles,caseSensitive);};Str.containsAny=function(s,needles,caseSensitive){var i;if($.isArray(needles)){for(i=0;i<needles.length;i++){if(Str.contains(s,needles[i],caseSensitive)){return true;}}
return false;}
return Str.contains(s,needles,caseSensitive);};Str.isString=function(o){return $.type(o)==='string';};Str.trim=function(s,c){if(!Str.isString(s)){return s;}
if(c==undefined||c==' '){if(String.prototype.trim){return String.prototype.trim.call(s);}
return s.replace(/^\s+/,'').replace(/\s+$/,'');}
return Str.trimStart(Str.trimEnd(s,c),c);};Str.trimStart=function(s,c){if(c==undefined||c==''){return s.replace(/^\s+/,'');}
var trims=c,regex,result;if(!$.isArray(c)){trims=[c];}
trims=Str.regexEscape(trims).join('|');regex='^('+trims+'|\s)+';regex=new RegExp(regex,'g');result=s.replace(regex,'');return result;};Str.trimEnd=function(s,c){if(c==undefined){return s.replace(/\s+$/,'');}
var trims=c,regex,result;if(!$.isArray(c)){trims=[c];}
trims=Str.regexEscape(trims).join('|');regex='('+trims+'|\s)+$';regex=new RegExp(regex,'g');result=s.replace(regex,'');return result;};Str.subStr=function(s,index,len){if(s==undefined){return'';}
len=len||0;if(Math.abs(index)>s.length)
{return s;}
if(index>-1){if(len>0&&(index+len)<s.length){return s.substring(index,index+len);}
return s.substring(index);}
var start=s.length+index;if(len>0&&(start+len)<s.length){return s.substring(start,start+len);}
return s.substring(start);};Str.subCount=function(s,sub,caseSensitive){sub=Str.regexEscape(sub);if(caseSensitive){return s.split(sub).length-1;}
return s.toLowerCase().split(sub.toLowerCase()).length-1;};Str.repeat=function(s,count){var newS="",i;for(i=0;i<count;i++){newS+=s;}
return newS;};Str.padLeft=function(s,padStr,totalLength){return s.length>=totalLength?s:Str.repeat(padStr,(totalLength-s.length)/padStr.length)+s;};Str.padRight=function(s,padStr,totalLength){return s.length>=totalLength?s:s+Str.repeat(padStr,(totalLength-s.length)/padStr.length);};Str.pad=function(s,padStr,totalLength,padRight){if(padRight){return Str.padRight(s,padStr,totalLength);}
return Str.padLeft(s,padStr,totalLength);};Str.stripTags=function(s){return s.replace(/<\/?[^>]+>/gi,'');};Str.escapeHTML=function(s){s=s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');return s;};Str.unescapeHTML=function(s){return Str.stripTags(s).replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>');};Str.stripViet=function(s){if(Str.empty(s))
{return s;}
s=s.replace(/[\u00E0\u00E1\u00E2\u00E3\u0103\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7]/g,'a');s=s.replace(/[\u00F2\u00F3\u00F4\u00F5\u01A1\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3]/g,'o');s=s.replace(/[\u00E8\u00E9\u00EA\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7]/g,'e');s=s.replace(/[\u00F9\u00FA\u0169\u01B0\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1]/g,'u');s=s.replace(/[\u00EC\u00ED\u0129\u1EC9\u1ECB]/g,'i');s=s.replace(/[\u00FD\u1EF3\u1EF5\u1EF7\u1EF9]/g,'y');s=s.replace(/[\u0111\u00F0\u0110]/g,'d');return s;};Str.multiLines=function(glue,args){args=Array.prototype.splice.call(arguments,1);return args.join(glue);};Str.parseJson=function(s,defaultValue){defaultValue=defaultValue===undefined?false:defaultValue;if(Str.empty(s)){return defaultValue;}
try{if($.type(s)==='string'){return $.parseJSON(s);}
return s;}
catch(err){return defaultValue;}};Str.escapeAttribute=function(s){return s.replace(/"/g,'\\"');};Str.reverse=function(s){if(s){return s.split('').reverse().join('');}
return s;};Str.matchAll=function(s,regex,index){var m,result=[];index=index||0;if(!s){return[];}
while(m=regex.exec(s)){result.push(m[index]);}
return result;};Str.chop=function(s,chunkSize){var regex;if(!s){return[];}
regex=new RegExp('.{1,'+chunkSize+'}','g');return s.match(regex);};function _getWords(s){s=s.replace(/(\w)([A-Z][a-z])/,'$1-$2');s=s.replace(' ','-');s=s.replace('_','-');s=s.replace(/-+/g,'-');return s.split('-')}
Str.toCamelCase=function(s){var words=_getWords(s),result='',i,word;for(i=0;i<words.length;i++){word=words[i];if(i==0){result+=word.toLowerCase();}
else{result+=word.charAt(0).toUpperCase()+word.substr(1).toLowerCase();}}
return result;};Str.toTitleCase=function(s){var words=_getWords(s),result='',i,word;for(i=0;i<words.length;i++){word=words[i];result+=word.charAt(0).toUpperCase()+word.substr(1).toLowerCase()+' ';}
return Str.trimEnd(result);};Str.toSnakeCase=function(s){var words=_getWords(s),result='',i,word;for(i=0;i<words.length;i++){word=words[i];result+=word.toLowerCase()+'_';}
return Str.trimEnd(result,'_');};Str.toKebabCase=function(s){var words=_getWords(s),result='',i,word;for(i=0;i<words.length;i++){word=words[i];result+=word.toLowerCase()+'-';}
return Str.trimEnd(result,'-');};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Str));(function(global,Utl,Str){"use strict";function _isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]';}
function _isPositiveNumber(num){if(typeof num=='number'||typeof num=='string'){var number=Number(num);return isNaN(number)?false:number>=0;}
return false;}
Utl.getAttr=function(obj,attr,defaultValue){var attrParts,i,newObj,curAttr;if(obj&&attr!=undefined&&attr.length>0){if(attr.indexOf('.')==-1){if(obj.hasOwnProperty(attr)){return obj[attr];}
return defaultValue;}
else{attrParts=attr.split('.');newObj=obj;for(i=0;i<attrParts.length;i++)
{curAttr=attrParts[i];if(newObj.hasOwnProperty(curAttr)){newObj=newObj[curAttr];if(i==attrParts.length-1){return newObj;}}
else{return defaultValue;}}}}
return defaultValue;};Utl.setAttr=function(obj,attr,value,skipIfExist){var attrParts,i,newObj,arrIndex,curAttr;attr=attr==undefined?'':attr.toString();if(obj&&attr.length>0){if(attr.indexOf('.')==-1){if(!skipIfExist||!obj.hasOwnProperty(attr)){if(_isArray(obj))
{if(_isPositiveNumber(attr)){arrIndex=Number(attr);if(arrIndex>=obj.length&&arrIndex>0)
{for(i=obj.length;i<arrIndex;i++){obj.push(null);}
obj.push(value);return true;}
obj.splice(arrIndex,1,value);return true;}}
else{obj[attr]=value;return true;}}}
else{attrParts=attr.split('.');newObj=obj;for(i=0;i<attrParts.length;i++)
{curAttr=attrParts[i];if(i<attrParts.length-1){Utl.setAttr(newObj,curAttr,{},true);}
else{return Utl.setAttr(newObj,curAttr,value,skipIfExist);}
newObj=Utl.getAttr(newObj,curAttr,undefined);}}}
return false;};Utl.getPrefixedOptions=function(obj,prefix,defaultOptions){var opts={};$.each(obj,function(key,value){if(Str.startsWith(key,prefix)){opts[Str.toCamelCase(key.replace(prefix,''))]=value;}});return $.extend({},defaultOptions||{},opts)};}(typeof window!=='undefined'?window:this,JU.__JU.Utl,JU.__JU.Str));(function(global,$,Slct,Str){"use strict";Slct.getSelectedValues=function(selectElement){var $selectBox=$(selectElement),$selected=$selectBox.find('option:selected'),result=[],$firstOpt;if($selectBox.is('[multiple]')){$selected.each(function(index,element){result.push(element.value);});return result;}
$firstOpt=$selected.first();if($firstOpt.length){return $firstOpt.val();}
return null;};function _createOptions(options){var $options=$('<select multiple="multiple"></select>');$.each(options,function(index,opt){var $optGroup,$newOpt;if(opt.hasOwnProperty('optGroup')){$optGroup=$('<optgroup></optgroup>').attr('label',opt.label);if(opt.id!=undefined){$optGroup.attr('id',opt.id);}
if(opt.options!=undefined&&opt.options.length){$optGroup.append(_createOptions(opt.options));}
$options.append($optGroup);return;}
$newOpt=$('<option></option>').attr('value',opt.value).text(opt.name);if(opt.id!=undefined){$newOpt.attr('id',opt.id);}
if(opt.selected===true){$newOpt.attr('selected','selected');}
$options.append($newOpt);});return $options.children();}
Slct.addOptions=function(selectElement,options){var $selectElement=$(selectElement),$options=_createOptions(options);$selectElement.append($options);};function _getOption(selectElement,input,byValue,caseSensitive){var result=false;$(selectElement).find('option').each(function(i,option){var $option=$(option);if(byValue){if(Str.equals($option.val(),input,caseSensitive)){result=$option;return false;}}
else{if(Str.equals($option.text(),input,caseSensitive)){result=$option;return false;}}});return result;}
Slct.getOptionByValue=function(selectElement,value,caseSensitive){return _getOption(selectElement,value,true,caseSensitive);};Slct.getOptionByText=function(selectElement,text,caseSensitive){return _getOption(selectElement,text,false,caseSensitive);};Slct.removeByValue=function(selectElement,value,caseSensitive){var $option=Slct.getOptionByValue(selectElement,value,caseSensitive);if($option){$option.remove();}};Slct.removeByText=function(selectElement,text,caseSensitive){var $option=Slct.getOptionByText(selectElement,text,caseSensitive);if($option){$option.remove();}};Slct.selectByValue=function(selectElement,value,caseSensitive){var $option=Slct.getOptionByValue(selectElement,value,caseSensitive);if($option){$option.prop('selected',true);return true;}
return false;};Slct.selectByText=function(selectElement,text,caseSensitive){var $option=Slct.getOptionByText(selectElement,text,caseSensitive);if($option){$option.prop('selected',true);return true;}
return false;};Slct.selectAll=function(selectElement){$(selectElement).find('option').prop('selected',true);};Slct.selectNone=function(selectElement){$(selectElement).find('option').prop('selected',false);};Slct.isEmpty=function(selectElement){return!$(selectElement).find('option').length;};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Slct,JU.__JU.Str));(function(global,$,Str){"use strict";Str.toHex=function(s){var r='',i;for(i=0;i<s.length;i++){r+=s.charCodeAt(i).toString(16);}
return r;};Str.fromHex=function(hex){var r='',i;for(i=0;i<hex.length;i+=2){r+=String.fromCharCode(parseInt(hex.substr(i,2),16));}
return r;};Str.format=function(s,args){args=Array.prototype.splice.call(arguments,1);s=s.replace(/\{(\d+)(:([^}]+?))?}/g,function(match,index,format,style){if(index<args.length&&args[index]!=undefined){if(!format){return args[index];}
return Str.formatObject(args[index],style);}
return match;});s=s.replace(/\{(\d+)\.([a-zA-Z0-9_]+)(:([^}]+?))?}/g,function(match,index,key,format,style){if(index<args.length&&args[index]!=undefined&&args[index].hasOwnProperty(key)){if(!format){return args[index][key];}
return Str.formatObject(args[index][key],style);}
return match;});return s;};Str.formatObject=function(o,format){if(o==undefined){return'';}
if(Dt.isValid(o)){return Dt.format(o,format);}
return o.toString();};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Str));(function(global,$,Pref,Str){"use strict";var _defaultOptions={expires:90,path:'/',secure:false};Pref.set=function(name,value,options){var opt=$.extend({},_defaultOptions,options);if(value==undefined){$.removeCookie(name,opt);}
else{$.cookie(name,value,opt);}};Pref.get=function(name,defaultValue){var value=$.cookie(name);return value==undefined?defaultValue:value;};Pref.remove=function(name,options){var opt=$.extend({},_defaultOptions,options);$.removeCookie(name,opt);};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.Pref,JU.__JU.Str));(function(global,$,UI){"use strict";UI.lightOverlayCSS={background:'#eee url(/static/ltgt/images/ajax-loader.gif) no-repeat center',backgroundSize:'16px 16px',opacity:0.5};UI.darkOverlayCSS={background:'#000 url(/static/ltgt/images/ajax-loader.gif) no-repeat center',backgroundSize:'16px 16px',opacity:0.6};UI.defaultBlockOpts={message:null,overlayCSS:UI.lightOverlayCSS};function _prepBlockUIOptions(options){if($.type(options)==='string'){options={message:options};}
options=$.extend({},UI.defaultBlockOpts,options);return options;}
UI.block=function(elm,options){if(elm==null){return;}
options=_prepBlockUIOptions(options);if(elm==undefined){return $.blockUI(options);}
return $(elm).block(options);};UI.unblock=function(elm){if(elm==null){return;}
if(elm==undefined){return $.unblockUI();}
return $(elm).unblock();};UI.delayBlock=function(delay,elm,options){if(elm==null){return;}
return setTimeout(function(){UI.block(elm,options);},delay);};UI.delayUnblock=function(timer,elm){if(elm==null){return;}
clearTimeout(timer);UI.unblock(elm);};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.UI));(function(global,$,Patterns,UI,Str,Bs,Fn,Utl,Obj){"use strict";Patterns.formAutoFocus=function(rootElement){var $rootElement=$(rootElement),reqInput=$rootElement.find('.has-error').find('[type="text"], [type="password"], [type="email"], textarea'),input;if(reqInput.length){reqInput.first().focus().caretToEnd();}
else{input=$rootElement.find('input[type="text"], input[type="password"], textarea');if(input.length){input.first().focus().caretToEnd();}}};Patterns.submitForm=function(formSelector,targetSelector,ajaxOptions,response,parentDialog,blockOptions,context,localTarget){var $frm=$(formSelector),defaultAjaxOptions,ajaxFormOpts,userBeforeSubmit,userSuccessFunc;if(!Patterns.dependencyCheck('ajaxForm',gettext('UI.Patterns.submitForm Error'),gettext('This function requires jQuery Form (https://github.com/malsup/form.git).'))){return;}
targetSelector=targetSelector||formSelector;function setupFormSubmit()
{function removeTempHiddenFields()
{setTimeout(function(){$frm.find('input[type="hidden"][name="submit-via"]').remove();},2000);}
$frm.ajaxForm(ajaxFormOpts);$frm.find('.ajax-reset').click(function(){$frm.attr('novalidate','novalidate');$frm.append(Str.format('<input type="hidden" name="submit-via" value="{0}" />',this.name||this.value));if(!$(this).is(':submit')){$frm.submit();}
removeTempHiddenFields();});$frm.find('[type="submit"]').not('.ajax-reset').click(function(){$frm.append(Str.format('<input type="hidden" name="submit-via" value="{0}" />',this.name||this.value));removeTempHiddenFields();});}
function parseData(data)
{var newAjaxContent,result=Str.parseJson(data,false),$result,$localTarget=$(targetSelector),$fileInput;if(result===false){$result=$('<div></div>').append(data);newAjaxContent=$result.find(targetSelector);if(localTarget!=undefined){$localTarget=$(localTarget);}
$fileInput=$localTarget.find('input[type="file"]').detach();$localTarget.replaceWith(newAjaxContent);if($fileInput.length){$localTarget=$($localTarget.selector);Arr.eachJq($fileInput,function($fileFieldWithAttachment){if($fileFieldWithAttachment.val()){var fieldName=$fileFieldWithAttachment.attr('name'),$newFileField=$localTarget.find('input[type="file"][name="'+fieldName+'"]');$newFileField.replaceWith($fileFieldWithAttachment);}});}
$frm=$($frm.selector);setupFormSubmit();Patterns.formAutoFocus($frm);Fn.apply(response,this,[data]);}
else{Patterns.parseAjaxCommand(result,targetSelector,context);Fn.apply(response,this,[result]);if(parentDialog){parentDialog.close();}}}
userBeforeSubmit=ajaxOptions!=undefined&&ajaxOptions.hasOwnProperty('beforeSubmit')?ajaxOptions.beforeSubmit:undefined;userSuccessFunc=ajaxOptions!=undefined&&ajaxOptions.hasOwnProperty('success')?ajaxOptions.success:undefined;defaultAjaxOptions={dataType:'html',error:function(jqXHR,textStatus,errorThrown){UI.unblock(targetSelector);BootstrapDialog.show({title:gettext('$.ajaxForm() Error'),message:errorThrown||gettext('Error occurred while retrieving the form.'),animate:false});}};ajaxFormOpts=$.extend({},defaultAjaxOptions,ajaxOptions,{beforeSubmit:function(){Fn.apply(userBeforeSubmit,this,arguments);UI.block(targetSelector,blockOptions);},success:function(data,textStatus,jqXHR){UI.unblock(targetSelector);parseData(data);Fn.apply(userSuccessFunc,this,arguments);}});setupFormSubmit();};Patterns.ajaxRefresh=function(localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions){remoteTarget=remoteTarget||localTarget;blockTarget=blockTarget===undefined?localTarget:blockTarget;var ajaxCommand={isAjaxCommand:true,message:'',displayMethod:'',command:'ajax-refresh',status:'',options:{localTarget:localTarget,remoteTarget:remoteTarget},onAjaxSuccess:'onAjaxSuccess'},context={onAjaxSuccess:onAjaxSuccess};if(blockOptions)
{ajaxCommand.options=$.extend({},blockOptions,ajaxCommand.options);}
Patterns.parseAjaxCommand(ajaxCommand,blockTarget,context);};function remoteFetch(command,url,data,localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions){remoteTarget=remoteTarget||localTarget;blockTarget=blockTarget===undefined?localTarget:blockTarget;var ajaxCommand={isAjaxCommand:true,message:'',displayMethod:'',command:command,status:'',options:{remoteUrl:url,data:data,localTarget:localTarget,remoteTarget:remoteTarget},onAjaxSuccess:'onAjaxSuccess'},context={onAjaxSuccess:onAjaxSuccess};if(blockOptions)
{ajaxCommand.options=$.extend({},blockOptions,ajaxCommand.options);}
Patterns.parseAjaxCommand(ajaxCommand,blockTarget,context);}
Patterns.ajaxGet=function(url,data,localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions){remoteFetch('ajax-get',url,data,localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions);};Patterns.ajaxPost=function(url,data,localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions){remoteFetch('ajax-post',url,data,localTarget,remoteTarget,blockTarget,onAjaxSuccess,blockOptions);};Patterns.parseAjaxCommand=function(ajaxCommand,blockTarget,context)
{if($.type(ajaxCommand)==='string'){ajaxCommand=Str.parseJson(ajaxCommand,false);}
if(!Typ.isAjaxCommand(ajaxCommand)){return false;}
if(ajaxCommand.command=='ajax-refresh'){ajaxCommand.command='ajax-get';ajaxCommand.options.remoteUrl='';if(ajaxCommand.options.commonTarget){ajaxCommand.options.localTarget=ajaxCommand.options.commonTarget;ajaxCommand.options.remoteTarget=ajaxCommand.options.commonTarget;delete ajaxCommand.options.commonTarget;}}
var defaultBlockUiOptions,blockOptions,bsDialogOpts,defaultBsDialogOpts,toastrOpts,defaultToastrOpts,toastrType,toastrTitle,displayMethod=ajaxCommand.displayMethod,command=ajaxCommand.command,options=ajaxCommand.options,hasSyncAction,canDisplayAsyncTask=false;hasSyncAction=$.inArray(ajaxCommand.command,['refresh','redirect'])!=-1;blockTarget=blockTarget===undefined?options.localTarget:blockTarget;if(Fn.callByName(ajaxCommand.onPreParse,context,options,ajaxCommand)===false)
{Fn.callByName(ajaxCommand.onPostParse,context,options,ajaxCommand);return;}
function executeSyncActions()
{var htmlContent=ajaxCommand.options.htmlContent;if(htmlContent&&ajaxCommand.options.contentSelector){htmlContent=$('<div></div>').append(htmlContent).find(ajaxCommand.options.contentSelector);}
if(command=='ajax-get'||command=='ajax-post'){UI.block(blockTarget);setTimeout(function(){canDisplayAsyncTask=true;},500);}
if(command=='refresh'){global.location.reload(true);}
else if(command=='redirect'){global.location=ajaxCommand.options.redirectUrl;}
else if(command=='replace-html'){$(ajaxCommand.options.localTarget).replaceWith(htmlContent);}
else if(command=='append-html'){$(ajaxCommand.options.localTarget).append(htmlContent);}
else if(!Str.empty(ajaxCommand.onPostParse)){Fn.callByName(ajaxCommand.onPostParse,context,options,ajaxCommand);}}
function executeAsyncActions(){var asyncTaskTimer,ajaxOptions;function displayAsyncTask(content,isError){return setInterval(function(){if(canDisplayAsyncTask){clearInterval(asyncTaskTimer);UI.unblock(blockTarget);var $result=$('<div></div>').append(content),$localTarget;if(!Str.empty(options.remoteTarget)){$result=$result.find(options.remoteTarget);}
$localTarget=$(options.localTarget);if(isError){$localTarget.empty().append(content);}
else{$localTarget.replaceWith($result);if(!Str.empty(ajaxCommand.onAjaxSuccess)){Fn.callByName(ajaxCommand.onAjaxSuccess,context,content,ajaxCommand);}}}},100);}
if(command=='ajax-get'||command=='ajax-post'){ajaxOptions={url:options.remoteUrl||'',method:command=='ajax-post'?'POST':'GET',data:options.data||''};$.ajax(ajaxOptions).done(function(data){asyncTaskTimer=displayAsyncTask(data,false);}).fail(function(jqXHR,textStatus,errorThrown){var errorMsg=gettext(errorThrown);if(errorMsg){errorMsg=Str.format('Error: {0}',errorMsg);}
else{errorMsg=gettext('Errors occurred while retrieving data from the server ...');}
asyncTaskTimer=displayAsyncTask(errorMsg,true);});}}
if(displayMethod=='block-ui')
{defaultBlockUiOptions={message:ajaxCommand.message||null,blockTarget:blockTarget,delay:hasSyncAction?300:2000};blockOptions=Utl.getPrefixedOptions(options,'blockUi',defaultBlockUiOptions);UI.block(blockOptions.blockTarget,blockOptions);executeAsyncActions();setTimeout(function(){executeSyncActions();if(!hasSyncAction){UI.unblock(blockOptions.blockTarget);}},blockOptions.delay);}
else if(displayMethod=='bs-dialog')
{defaultBsDialogOpts={title:options.title||gettext('Message'),message:ajaxCommand.message,animate:false,type:ajaxCommand.status=='error'?'type-danger':'type-primary',buttons:[{label:gettext('OK'),cssClass:'btn-primary',action:function(dialog){dialog.close();}}],onhidden:function(){executeSyncActions();}};executeAsyncActions();bsDialogOpts=Utl.getPrefixedOptions(options,'bsDialog',defaultBsDialogOpts);BootstrapDialog.show(bsDialogOpts);}
else if(displayMethod=='toastr')
{if(!Patterns.dependencyCheck(global.toastr,gettext('UI.Patterns.parseAjaxCommand Toastr Error'),gettext('This function requires toastr plugins (https://github.com/CodeSeven/toastr).'))){return;}
defaultToastrOpts={title:undefined,type:ajaxCommand.status=='error'?'error':'success',closeButton:true,newestOnTop:true,positionClass:'toast-top-right',onHidden:function(){executeSyncActions();}};executeAsyncActions();toastrOpts=Utl.getPrefixedOptions(options,'toastr',defaultToastrOpts);toastrType=Obj.pop(toastrOpts,'type','success');toastrTitle=Obj.pop(toastrOpts,'title',undefined);toastr[toastrType](ajaxCommand.message,toastrTitle,toastrOpts)}
else if(displayMethod=='alert'){executeAsyncActions();alert(ajaxCommand.message);executeSyncActions();}
else{executeAsyncActions();executeSyncActions();}
return ajaxCommand;};Patterns.bsDialogAjax=function(title,ajaxOpts,dialogOptions,shown,hidden,context){if(global.BootstrapDialog==undefined){alert('This function required Bootstrap Dialog plugin.');return;}
var defaultOptions,options;defaultOptions={title:title,message:gettext('Loading, please wait ... '),animate:false,onshown:function($dialogRef){var uiBlockTmr,$modalDialog=$dialogRef.getModalDialog();uiBlockTmr=UI.delayBlock(300,$modalDialog);function unblockWaitingScreen(){UI.delayUnblock(uiBlockTmr,$modalDialog);}
$.ajax(ajaxOpts).done(function(data){var result=Str.parseJson(data,false);if(result===false){$modalDialog.find('.modal-body').empty().append(data);Patterns.formAutoFocus($modalDialog);Fn.apply(shown,$dialogRef,[data]);unblockWaitingScreen();}
else{unblockWaitingScreen();$dialogRef.close();UI.Patterns.parseAjaxCommand(result,$modalDialog,context);}}).fail(function(jqXHR,textStatus,errorThrown){unblockWaitingScreen();errorThrown=gettext(errorThrown)||gettext('Error occurred while retrieving the form.');$modalDialog.find('.modal-body').empty().append(Str.format('<span class="error">{0}</span>',errorThrown));});},onhidden:function(dialogRef){Fn.apply(hidden,dialogRef);}};options=$.extend({},dialogOptions,defaultOptions);return BootstrapDialog.show(options);};Patterns.submitAjaxRequest=function(ajaxOpts,blockTarget,onComplete,context){var uiBlockTmr=UI.delayBlock(300,blockTarget);function unblockWaitingScreen(){UI.delayUnblock(uiBlockTmr,blockTarget);}
$.ajax(ajaxOpts).done(function(data){var ajaxCommand=Str.parseJson(data,false);if(ajaxCommand!=false){unblockWaitingScreen();UI.Patterns.parseAjaxCommand(ajaxCommand,blockTarget,context);if(!ajaxCommand.isAjaxCommand){Fn.apply(onComplete,blockTarget||this,[ajaxCommand]);}}
else{unblockWaitingScreen();Fn.apply(onComplete,blockTarget||this,[data]);}}).fail(function(jqXHR,textStatus,errorThrown){unblockWaitingScreen();BootstrapDialog.show({title:gettext('Error'),animate:false,message:gettext(errorThrown)||gettext('Error occurred while submitting ...')});});};var cache_selectAjaxFilter={};Patterns.selectAjaxFilter=function(srcSelect,targetSelect,ajaxOpts,targetUpdated,noCache,container){ajaxOpts=$.type(ajaxOpts)==='string'?{url:ajaxOpts}:ajaxOpts;var $container=$(container||'body');$container.on('change',srcSelect,function(){var $srcSelect=$container.find(srcSelect),$targetSelect=$container.find(targetSelect),selectedValues=Slct.getSelectedValues($srcSelect),errorMessage=gettext('Error occurred while retrieving data from the server.'),opt={data:{src_name:$srcSelect.attr('name'),target_name:$targetSelect.attr('name')}},token=$.cookie('csrftoken'),cacheKey;if(Typ.isArray(selectedValues)){cacheKey=$srcSelect.attr('name')+'_'+Arr.implode(selectedValues,'|');}
else{cacheKey=$srcSelect.attr('name')+'_'+selectedValues;}
opt.data[$srcSelect.attr('name')]=selectedValues;opt=$.extend({},ajaxOpts,opt);if(token!=undefined&&opt.data.csrfmiddlewaretoken==undefined&&token!=undefined){opt.data.csrfmiddlewaretoken=token;}
function loadOptions(options){if(Typ.isJquery(options)){$targetSelect.empty().append(options);}
else
{$targetSelect.empty();Slct.addOptions($targetSelect,options);}
Fn.apply(targetUpdated,$targetSelect.get(0),[$targetSelect]);}
if(!noCache&&cache_selectAjaxFilter.hasOwnProperty(cacheKey))
{loadOptions(cache_selectAjaxFilter[cacheKey]);return;}
$.ajax(opt).done(function(data){var options=Str.parseJson(data,false),targetId,targetName,selector,$options,$data;if(options!==false){cache_selectAjaxFilter[cacheKey]=options;loadOptions(options);}
else{$data=$(data);targetId=$targetSelect.attr('id');if(targetId){selector='select#'+targetId;$options=$data.find(selector);}
targetName=$targetSelect.attr('name');if(targetName&&!$options.length){selector='select[name="'+targetName+'"]';$options=$data.find(selector);}
if($options.length){cache_selectAjaxFilter[cacheKey]=$options.children();loadOptions($options.children());}
else{BootstrapDialog.alert(errorMessage);}}}).fail(function(jqXHR,textStatus,errorThrown){BootstrapDialog.show({title:errorThrown,animate:false,message:errorMessage});});});if(!Slct.getSelectedValues($(targetSelect))){$(srcSelect).change();}};Patterns.clearOnEscape=function(inputSelector,container){var $container=$(container),$input=$(inputSelector),$target;function clearOnEscape(e){if(e.which==27){$target=$(e.target);$target.prop('value',null).val('').change();}}
if(container&&$container.length){$container.on('keyup',inputSelector,clearOnEscape);}
else{$input.on('keyup',clearOnEscape);}};Patterns.dependencyCheck=function(testObj,title,message){var result=false;if(testObj){if($.type(testObj)=='string'){result=$.fn.hasOwnProperty(testObj);}
else{result=true;}}
if(result){return true;}
if($.fn.hasOwnProperty('ajaxForm')){BootstrapDialog.show({title:title,message:message,animate:false});}
else if(global.toastr!=undefined){global.toastr.error(message,title);}
else{alert(title+"\n"+message);}
return false;};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.UI.Patterns,JU.__JU.UI,JU.__JU.Str,JU.__JU.Bs,JU.__JU.Fn,JU.__JU.Utl,JU.__JU.Obj));(function(global,$,Bs){"use strict";Bs.confirmYesNo=function(message,buttonClicked){function invokeButtonClicked(dialog,result){if(buttonClicked!=undefined){Fn.apply(buttonClicked,dialog,[result]);buttonClicked=null;dialog.close();}}
BootstrapDialog.show({title:gettext('Confirmation'),message:message,animate:false,buttons:[{label:gettext('(N) No'),hotkey:78,action:function(dialog){invokeButtonClicked(dialog,false);}},{label:gettext('(Y) Yes'),hotkey:89,cssClass:'btn-primary',action:function(dialog){invokeButtonClicked(dialog,true);}}],onhide:function(dialog){invokeButtonClicked(dialog,false);}});};}(typeof window!=='undefined'?window:this,jQuery,JU.__JU.UI.Bs));(function(global){"use strict";if(!global.JU.__JU){return;}
var populateGlobals=false,forcePush=false;global._ju={};JU.publish(JU.__JU,populateGlobals,forcePush);delete JU.__JU;JU.activate(global._ju);}(typeof window!=='undefined'?window:this));